{"version":3,"file":"js/509.0a4c2af2.js","mappings":"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","sources":["webpack://el-ciruelo-app-web/./src/views/VentasView.vue","webpack://el-ciruelo-app-web/./src/components/Ventas.vue","webpack://el-ciruelo-app-web/./src/components/Ventas.vue?dc2e","webpack://el-ciruelo-app-web/./src/views/VentasView.vue?f0b6","webpack://el-ciruelo-app-web/./src/clientes/ProductoClientes.js"],"sourcesContent":["<template>\r\n  <Ventas />\r\n</template>\r\n\r\n<script>\r\nimport Ventas from '@/components/Ventas.vue'\r\n\r\nexport default {\r\n  components: {\r\n    Ventas\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n  <div class=\"container\">\r\n    <h2>Ventas</h2>\r\n\r\n    <form class=\"form-venta\" @submit.prevent=\"agregarVenta\">\r\n      <!-- Autocomplete producto -->\r\n      <div class=\"form-group\">\r\n        <label for=\"productoNombre\">Producto</label>\r\n        <q-select\r\n          v-model=\"productoSeleccionado\"\r\n          use-input\r\n          input-debounce=\"300\"\r\n          @filter=\"filtrarProductos\"\r\n          option-label=\"nombre\"\r\n          option-value=\"id\"\r\n          map-options\r\n            :placeholder=\"productoSeleccionado ? '' : qSelectPlaceholder\"\r\n          :loading=\"cargandoProductos\"\r\n          @update:model-value=\"onProductoSeleccionado\"\r\n          clearable\r\n          :options=\"\r\n            productosFiltrados.map((p) => ({\r\n              ...p,\r\n              label: `${p.nombre} (${p.marca})`,\r\n            }))\r\n          \"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"cantidad\">Cantidad</label>\r\n        <input\r\n          id=\"cantidad\"\r\n          v-model.number=\"nuevaVenta.cantidad\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          placeholder=\"Cantidad\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"precio\">Precio unitario</label>\r\n        <input\r\n          id=\"precio\"\r\n          v-model.number=\"nuevaVenta.precio\"\r\n          type=\"number\"\r\n          min=\"0\"\r\n          step=\"0.01\"\r\n          placeholder=\"Precio unitario\"\r\n          readonly\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-actions\">\r\n        <button type=\"submit\" :disabled=\"!nuevaVenta.productoId\">\r\n          Agregar Venta\r\n        </button>\r\n      </div>\r\n    </form>\r\n\r\n    <div v-if=\"ventas.length === 0\" class=\"sin-productos\">\r\n      No hay ventas registradas.\r\n    </div>\r\n\r\n    <table v-else>\r\n      <thead>\r\n        <tr>\r\n          <th>#</th>\r\n          <th>Producto</th>\r\n          <th>Cantidad</th>\r\n          <th>Precio</th>\r\n          <th>Subtotal</th>\r\n          <th>Acciones</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(venta, idx) in ventasPaginadas\" :key=\"idx\">\r\n          <td>{{ idx + 1 + inicio }}</td>\r\n          <td>{{ venta.productoNombre || (venta.detalles && venta.detalles[0]?.productoNombre) }}</td>\r\n          <td>{{ venta.cantidad || (venta.detalles && venta.detalles[0]?.cantidad) }}</td>\r\n          <td>${{ (venta.precio || venta.detalles?.[0]?.precioUnitario || 0).toFixed(2) }}</td>\r\n          <td>${{ ((venta.cantidad || venta.detalles?.[0]?.cantidad || 0) * (venta.precio || venta.detalles?.[0]?.precioUnitario || 0)).toFixed(2) }}</td>\r\n          <td>\r\n            <button @click=\"eliminarVenta(idx + inicio)\">Eliminar</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <div v-if=\"totalPages > 1\" class=\"paginacion\">\r\n      <button :disabled=\"currentPage === 1\" @click=\"cambiarPagina(currentPage - 1)\">Anterior</button>\r\n      <button\r\n        v-for=\"page in totalPages\"\r\n        :key=\"page\"\r\n        :class=\"{ activo: page === currentPage }\"\r\n        @click=\"cambiarPagina(page)\"\r\n      >\r\n        {{ page }}\r\n      </button>\r\n      <button :disabled=\"currentPage === totalPages\" @click=\"cambiarPagina(currentPage + 1)\">Siguiente</button>\r\n    </div>\r\n\r\n    <div class=\"info-paginacion\" v-if=\"ventas.length\">\r\n      Mostrando registros del {{ inicio + 1 }} al {{ fin }} de un total de {{ ventas.length }} registros\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProductosByNombreLike } from \"@/clientes/ProductoClientes\";\r\nimport ventaService from \"@/clientes/VentaCliente\";\r\nimport { QSelect, QInput } from \"quasar\";\r\n\r\nexport default {\r\n  components: {\r\n    QSelect,\r\n    QInput,\r\n  },\r\n  data() {\r\n    return {\r\n      ventas: [],\r\n      productosFiltrados: [],\r\n      cargandoProductos: false,\r\n      qSelectPlaceholder: \"Escribe para buscar producto\",\r\n      nuevaVenta: {\r\n        productoId: null,\r\n        productoNombre: \"\",\r\n        cantidad: 1,\r\n        precio: 0,\r\n      },\r\n      productoSeleccionado: null,\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n    };\r\n  },\r\n  computed: {\r\n    totalPages() {\r\n      return Math.ceil(this.ventas.length / this.pageSize);\r\n    },\r\n    ventasPaginadas() {\r\n      const start = (this.currentPage - 1) * this.pageSize;\r\n      return this.ventas.slice(start, start + this.pageSize);\r\n    },\r\n    inicio() {\r\n      return (this.currentPage - 1) * this.pageSize;\r\n    },\r\n    fin() {\r\n      return Math.min(this.inicio + this.pageSize, this.ventas.length);\r\n    }\r\n  },\r\n  methods: {\r\n    async filtrarProductos(val, update, abort) {\r\n      if (!val || val.length < 2) {\r\n        update(() => {\r\n          this.productosFiltrados = [];\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.cargandoProductos = true;\r\n      try {\r\n        const productos = await getProductosByNombreLike(val);\r\n        update(() => {\r\n          this.productosFiltrados = productos;\r\n          \r\n        });\r\n        \r\n      } catch (error) {\r\n        console.error(\"Error buscando productos:\", error);\r\n        update(() => {\r\n          this.productosFiltrados = [];\r\n        });\r\n      } finally {\r\n        this.cargandoProductos = false;\r\n      }\r\n    },\r\n\r\n   onProductoSeleccionado(producto) {\r\n  if (producto) {\r\n    this.nuevaVenta.productoId = producto.id;\r\n    this.nuevaVenta.productoNombre = producto.nombre;\r\n    this.nuevaVenta.productoMarca = producto.marca; // 👈 Agrega esto\r\n    this.nuevaVenta.precio = producto.precioVenta;\r\n    this.textoBusquedaProducto = producto.nombre;\r\n  } else {\r\n    this.nuevaVenta = {\r\n      productoId: null,\r\n      productoNombre: \"\",\r\n      productoMarca: \"\",        // 👈 reset\r\n      cantidad: 1,\r\n      precio: 0,\r\n    };\r\n    this.textoBusquedaProducto = \"\";\r\n  }\r\n}\r\n\r\n,\r\n\r\n    async agregarVenta() {\r\n  if (!this.nuevaVenta.productoId) {\r\n    alert(\"Selecciona un producto válido\");\r\n    return;\r\n  }\r\n\r\n  const payload = {\r\n    fecha: new Date().toISOString().slice(0, 19), // 👈 formato compatible\r\n    total: this.nuevaVenta.cantidad * this.nuevaVenta.precio,\r\n    detalles: [\r\n      {\r\n        productoId: this.nuevaVenta.productoId,\r\n        productoNombre: this.nuevaVenta.productoNombre,\r\n        productoMarca: this.nuevaVenta.productoMarca,\r\n        cantidad: this.nuevaVenta.cantidad,\r\n        precioUnitario: this.nuevaVenta.precio,\r\n        subtotal: this.nuevaVenta.cantidad * this.nuevaVenta.precio,\r\n      },\r\n    ],\r\n  };\r\n\r\n  console.log(\"Payload enviado:\", payload);\r\n\r\n  try {\r\n    const response = await ventaService.crearVenta(payload);\r\n    console.log(\"Respuesta del backend:\", response);\r\n\r\n    this.ventas.push({\r\n      productoNombre: this.nuevaVenta.productoNombre,\r\n      cantidad: this.nuevaVenta.cantidad,\r\n      precio: this.nuevaVenta.precio,\r\n    });\r\n\r\n    this.productoSeleccionado = null;\r\n    this.nuevaVenta = {\r\n      productoId: null,\r\n      productoNombre: \"\",\r\n      productoMarca: \"\",\r\n      cantidad: 1,\r\n      precio: 0,\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error(\"Error completo al crear venta:\", error);\r\n    if (error.response) {\r\n      console.error(\"Código HTTP:\", error.response.status);\r\n      console.error(\"Body de la respuesta:\", error.response.data);\r\n    }\r\n    alert(\"Error al crear la venta, revisa consola.\");\r\n  }\r\n},\r\n\r\n    cambiarPagina(page) {\r\n      if (page >= 1 && page <= this.totalPages) {\r\n        this.currentPage = page;\r\n      }\r\n    },\r\n    eliminarVenta(idx) {\r\n      this.ventas.splice(idx, 1);\r\n    },\r\n  },\r\n  async mounted() {\r\n    try {\r\n      const response = await ventaService.obtenerTodasLasVentas();\r\n      // Normalizar datos del backend para que coincidan con la estructura local\r\n      this.ventas = response.data.map(venta => {\r\n        if (venta.detalles && venta.detalles.length > 0) {\r\n          const detalle = venta.detalles[0];\r\n          return {\r\n            productoNombre: detalle.productoNombre,\r\n            cantidad: detalle.cantidad,\r\n            precio: detalle.precioUnitario,\r\n            ...venta // mantener otros campos si existen\r\n          };\r\n        }\r\n        return venta;\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error al cargar ventas:\", error);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n  padding: 32px 0;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 18px;\r\n  color: #0ea5e9;\r\n  font-size: 1.7rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.form-venta {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  gap: 24px;\r\n  margin-bottom: 28px;\r\n  background: #f8fafc;\r\n  padding: 24px 28px 18px 28px;\r\n  border-radius: 18px;\r\n  box-shadow: 0 1px 6px rgba(56, 189, 248, 0.07);\r\n  align-items: end;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 160px;\r\n}\r\n\r\n.form-group label {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #0ea5e9;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.form-group input {\r\n  padding: 8px 12px;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 6px;\r\n  font-size: 15px;\r\n  outline: none;\r\n  transition: border 0.2s;\r\n  background: #fff;\r\n}\r\n\r\n.form-group input:focus {\r\n  border-color: #38bdf8;\r\n}\r\n\r\n.form-actions {\r\n  grid-column: 1 / span 3;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.form-actions button {\r\n  background: linear-gradient(90deg, #38bdf8 0%, #0ea5e9 100%);\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  padding: 10px 28px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 8px rgba(56, 189, 248, 0.1);\r\n  transition: background 0.2s, box-shadow 0.2s, transform 0.1s;\r\n}\r\n\r\n.form-actions button:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.form-actions button:hover:not(:disabled) {\r\n  background: linear-gradient(90deg, #0ea5e9 0%, #38bdf8 100%);\r\n  box-shadow: 0 4px 16px rgba(56, 189, 248, 0.18);\r\n  transform: translateY(-2px) scale(1.03);\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: #fff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\r\n  font-size: 15px;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 10px 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n\r\nth {\r\n  background: #f1f5f9;\r\n  font-weight: 600;\r\n  color: #374151;\r\n}\r\n\r\ntr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\nbutton {\r\n  margin-right: 8px;\r\n  padding: 6px 16px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  background: #38bdf8;\r\n  color: #fff;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\ntd > button {\r\n  padding: 6px 14px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  margin-right: 0;\r\n  box-shadow: none;\r\n}\r\n\r\ntd > button:last-child {\r\n  background: #ef4444;\r\n  color: #fff;\r\n  border: none;\r\n  margin-left: 4px;\r\n  padding: 6px 14px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\ntd > button:hover {\r\n  opacity: 0.85;\r\n}\r\n\r\n.sin-productos {\r\n  text-align: center;\r\n  color: #888;\r\n  font-style: italic;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.paginacion {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 18px 0 8px 0;\r\n}\r\n.paginacion button {\r\n  margin: 0 2px;\r\n  padding: 6px 14px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  background: #e5e7eb;\r\n  color: #374151;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n.paginacion button.activo {\r\n  background: #38bdf8;\r\n  color: #fff;\r\n}\r\n.paginacion button:disabled {\r\n  background: #f1f5f9;\r\n  color: #bbb;\r\n  cursor: not-allowed;\r\n}\r\n.info-paginacion {\r\n  text-align: center;\r\n  color: #555;\r\n  font-size: 14px;\r\n  margin-bottom: 8px;\r\n}\r\n</style>\r\n","import { render } from \"./Ventas.vue?vue&type=template&id=fbdce67e&scoped=true\"\nimport script from \"./Ventas.vue?vue&type=script&lang=js\"\nexport * from \"./Ventas.vue?vue&type=script&lang=js\"\n\nimport \"./Ventas.vue?vue&type=style&index=0&id=fbdce67e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fbdce67e\"]])\n\nexport default __exports__","import { render } from \"./VentasView.vue?vue&type=template&id=74a08270\"\nimport script from \"./VentasView.vue?vue&type=script&lang=js\"\nexport * from \"./VentasView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import axios from \"axios\";\r\n\r\nconst API_URL = \"http://localhost:8081/facturacion/v1.1/productos\";\r\n\r\nexport const postProducto = async (producto) => {\r\n    try {\r\n        const response = await axios.post(API_URL, producto);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error guardando producto:\", error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const putProducto = async (producto,id) => {\r\n    try {\r\n        const response = await axios.put(`${API_URL}/${id}`, producto);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error actualizando producto:\", error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const deleteProducto = async (id) => {\r\n    try {\r\n        const response = await axios.delete(`${API_URL}/${id}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error eliminando producto:\", error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const getProductoByNombre = async (nombre) => {\r\n    try {\r\n        const response = await axios.get(`${API_URL}/nombre/${nombre}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error al obtener producto by nombre:\", error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const getProductoByCategoria = async (categoria) => {\r\n    try {\r\n        const response = await axios.get(`${API_URL}/categoria/${categoria}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error al obtener producto by categoria:\", error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const getProductosByMarca = async (marca) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/marca/${marca}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Error al obtener productos by marca ${marca}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const getProductos = async () => {\r\n  try {\r\n    const response = await axios.get(API_URL);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al obtener productos:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const getProductoByMarcaAndCategoria = async (marca, categoria) => {\r\n    try {\r\n        const response = await axios.get(`${API_URL}/marca_categoria/${categoria}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(`Error al obtener producto by marca ${marca} and categoria ${categoria}:`, error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const getProductosByMarcaAndCategoria = async (marca, categoria) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/marca_categoria`, {\r\n      params: { marca, categoria }\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Error al obtener productos by marca ${marca} and categoria ${categoria}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const getProductosByNombreLike = async (nombre) => {\r\n    try {\r\n        const response = await axios.get(`${API_URL}/buscar`, {\r\n            params: { nombre }\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(`Error al obtener productos by nombre like ${nombre}:`, error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n"],"names":["_createBlock","_component_Ventas","class","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","agregarVenta","_hoisted_2","for","_createVNode","_component_q_select","$data","productoSeleccionado","$event","onProductoSeleccionado","onFilter","filtrarProductos","placeholder","qSelectPlaceholder","loading","cargandoProductos","clearable","options","productosFiltrados","map","p","nombre","marca","_hoisted_3","id","nuevaVenta","cantidad","type","min","required","number","_hoisted_4","precio","step","readonly","_hoisted_5","disabled","productoId","_hoisted_6","ventas","length","_hoisted_7","_hoisted_8","_Fragment","_renderList","ventasPaginadas","venta","idx","key","_toDisplayString","inicio","productoNombre","detalles","precioUnitario","toFixed","onClick","eliminarVenta","_hoisted_9","totalPages","_hoisted_10","currentPage","cambiarPagina","_hoisted_11","page","_normalizeClass","activo","_hoisted_12","_hoisted_13","_hoisted_14","fin","components","QSelect","QInput","data","pageSize","computed","Math","ceil","this","start","slice","methods","val","update","abort","productos","getProductosByNombreLike","error","console","producto","productoMarca","precioVenta","textoBusquedaProducto","alert","payload","fecha","Date","toISOString","total","subtotal","log","response","ventaService","crearVenta","push","status","splice","mounted","obtenerTodasLasVentas","detalle","__exports__","Ventas","render","API_URL","postProducto","async","axios","post","putProducto","put","deleteProducto","delete","getProductos","get","params"],"sourceRoot":""}