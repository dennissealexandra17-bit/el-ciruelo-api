"use strict";(self["webpackChunkel_ciruelo_app_web"]=self["webpackChunkel_ciruelo_app_web"]||[]).push([[176],{1176:function(o,t,r){r.r(t),r.d(t,{default:function(){return ao}});var a=r(6768);const e={class:"producto-view"},i={class:"acciones-producto"};function n(o,t,r,n,c,l){const d=(0,a.g2)("AgregarProducto"),s=(0,a.g2)("EditarProducto"),u=(0,a.g2)("ProductoFiltro"),p=(0,a.g2)("ProductoTable");return(0,a.uX)(),(0,a.CE)("div",e,[(0,a.Lk)("div",i,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=o=>c.mostrarAgregar=!0)},"Agregar Producto")]),c.mostrarAgregar?((0,a.uX)(),(0,a.Wv)(d,{key:0,onClose:t[1]||(t[1]=o=>c.mostrarAgregar=!1),onAgregar:l.agregarProducto},null,8,["onAgregar"])):(0,a.Q3)("",!0),c.mostrarEditar?((0,a.uX)(),(0,a.Wv)(s,{key:1,productoEditar:c.productoEditar,onEditar:l.guardarProductoEditado,onClose:l.cerrarFormulario},null,8,["productoEditar","onEditar","onClose"])):(0,a.Q3)("",!0),(0,a.bF)(u,{onFiltrar:l.aplicarFiltro},null,8,["onFiltrar"]),(0,a.bF)(p,{productos:l.productosFiltrados,onEditar:l.editarProducto,onEliminar:l.eliminarProducto},null,8,["productos","onEditar","onEliminar"])])}r(8111),r(2489);var c=r(3460),l=r(9474),d=r(4232);const s={class:"tabla-container"},u=["onClick"],p=["onClick"],m={key:0},k={key:0,class:"paginacion"},g=["disabled"],h=["onClick"],b=["disabled"],L={class:"info-paginacion"},v={class:"total-compra"};function C(o,t,r,e,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",s,[(0,a.Lk)("table",null,[t[3]||(t[3]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Nombre"),(0,a.Lk)("th",null,"Compra"),(0,a.Lk)("th",null,"Precio"),(0,a.Lk)("th",null,"Stock"),(0,a.Lk)("th",null,"Marca"),(0,a.Lk)("th",null,"Categoría"),(0,a.Lk)("th",null,"Acciones")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.productosPaginados,t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id},[(0,a.Lk)("td",null,(0,d.v_)(t.nombre),1),(0,a.Lk)("td",null,(0,d.v_)(t.precioCompra),1),(0,a.Lk)("td",null,(0,d.v_)(t.precioVenta),1),(0,a.Lk)("td",null,(0,d.v_)(t.stock),1),(0,a.Lk)("td",null,(0,d.v_)(t.marca),1),(0,a.Lk)("td",null,(0,d.v_)(t.categoria),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:r=>o.$emit("editar",t)},"Editar",8,u),(0,a.Lk)("button",{onClick:r=>o.$emit("eliminar",t)},"Eliminar",8,p)])]))),128)),r.productos.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("tr",m,t[2]||(t[2]=[(0,a.Lk)("td",{colspan:"7",class:"sin-productos"},"No hay productos para mostrar.",-1)])))])]),n.totalPages>1?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("button",{disabled:1===i.currentPage,onClick:t[0]||(t[0]=o=>n.cambiarPagina(i.currentPage-1))},"Anterior",8,g),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPages,o=>((0,a.uX)(),(0,a.CE)("button",{key:o,class:(0,d.C4)({activo:o===i.currentPage}),onClick:t=>n.cambiarPagina(o)},(0,d.v_)(o),11,h))),128)),(0,a.Lk)("button",{disabled:i.currentPage===n.totalPages,onClick:t[1]||(t[1]=o=>n.cambiarPagina(i.currentPage+1))},"Siguiente",8,b)])):(0,a.Q3)("",!0),(0,a.Lk)("div",L," Mostrando registros del "+(0,d.v_)(n.inicio+1)+" al "+(0,d.v_)(n.fin)+" de un total de "+(0,d.v_)(r.productos.length)+" registros ",1)]),(0,a.Lk)("div",v,[t[4]||(t[4]=(0,a.Lk)("strong",null,"Total Compra:",-1)),(0,a.eW)(" $"+(0,d.v_)(n.totalCompra.toFixed(2)),1)])],64)}r(8237);var y={name:"ProductoTable",props:{productos:{type:Array,required:!0}},data(){return{currentPage:1,pageSize:10}},computed:{totalPages(){return Math.ceil(this.productos.length/this.pageSize)},productosPaginados(){const o=(this.currentPage-1)*this.pageSize;return this.productos.slice(o,o+this.pageSize)},inicio(){return(this.currentPage-1)*this.pageSize},fin(){return Math.min(this.inicio+this.pageSize,this.productos.length)},totalCompra(){return this.productos.reduce((o,t)=>o+(parseFloat(t.precioCompra)||0)*(parseFloat(t.stockInicial)||0),0)}},methods:{cambiarPagina(o){o>=1&&o<=this.totalPages&&(this.currentPage=o)}}},P=r(1241);const E=(0,P.A)(y,[["render",C],["__scopeId","data-v-1c8224f0"]]);var w=E,f=r(5130);const V={class:"container"},F={class:"datos"},A={class:"dato-row"},_={class:"dato-row"},M={class:"dato-row"},I={class:"dato-row"},U={class:"dato-row"},J={class:"dato-row"},$={class:"dato-row"},S={class:"acciones"};function X(o,t,r,e,i,n){return(0,a.uX)(),(0,a.CE)("div",V,[(0,a.Lk)("button",{class:"cerrar",onClick:t[0]||(t[0]=t=>o.$emit("close"))},"×"),t[16]||(t[16]=(0,a.Lk)("h3",null,"Agregar Producto",-1)),(0,a.Lk)("div",F,[(0,a.Lk)("div",A,[t[9]||(t[9]=(0,a.Lk)("p",null,"Nombre:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"Ingrese el nombre del producto","onUpdate:modelValue":t[1]||(t[1]=o=>i.nombre=o)},null,512),[[f.Jo,i.nombre]])]),(0,a.Lk)("div",_,[t[10]||(t[10]=(0,a.Lk)("p",null,"Precio de Compra:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",placeholder:"Ingrese el precio del producto","onUpdate:modelValue":t[2]||(t[2]=o=>i.precioCompra=o)},null,512),[[f.Jo,i.precioCompra]])]),(0,a.Lk)("div",M,[t[11]||(t[11]=(0,a.Lk)("p",null,"Stock:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",placeholder:"Ingrese la cantidad en stock","onUpdate:modelValue":t[3]||(t[3]=o=>i.stock=o)},null,512),[[f.Jo,i.stock]])]),(0,a.Lk)("div",I,[t[12]||(t[12]=(0,a.Lk)("p",null,"Precio de Venta:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",placeholder:"Ingrese el precio de venta","onUpdate:modelValue":t[4]||(t[4]=o=>i.precioVenta=o)},null,512),[[f.Jo,i.precioVenta]])]),(0,a.Lk)("div",U,[t[13]||(t[13]=(0,a.Lk)("p",null,"Marca:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"Ingrese la marca del producto","onUpdate:modelValue":t[5]||(t[5]=o=>i.marca=o)},null,512),[[f.Jo,i.marca]])]),(0,a.Lk)("div",J,[t[14]||(t[14]=(0,a.Lk)("p",null,"Categoria:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"Ingrese la categoria del producto","onUpdate:modelValue":t[6]||(t[6]=o=>i.categoria=o)},null,512),[[f.Jo,i.categoria]])]),(0,a.Lk)("div",$,[t[15]||(t[15]=(0,a.Lk)("p",null,"Cantidad Mínima:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",placeholder:"Ingrese la cantidad mínima","onUpdate:modelValue":t[7]||(t[7]=o=>i.cantidadMinima=o),min:"1"},null,512),[[f.Jo,i.cantidadMinima]])])]),(0,a.Lk)("div",S,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...o)=>n.agregarProducto&&n.agregarProducto(...o))},"Agregar")])])}var x={data(){return{nombre:"",precioCompra:0,stock:0,precioVenta:0,marca:"",categoria:"",cantidadMinima:1}},methods:{async agregarProducto(){const o={nombre:this.nombre,precioCompra:this.precioCompra,stock:this.stock,precioVenta:this.precioVenta,marca:this.marca,categoria:this.categoria,cantidadMinima:this.cantidadMinima};if(this.cantidadMinima<1)alert("La cantidad mínima debe ser al menos 1");else try{const t=await(0,c.h$)(o);console.log("Producto agregado:",t),this.$emit("close")}catch(t){console.error("Error al agregar producto:",t)}}}};const z=(0,P.A)(x,[["render",X],["__scopeId","data-v-00eeffe2"]]);var N=z;const Q={class:"container"},B={class:"datos"},T={class:"dato-row"},K={class:"dato-row"},W={class:"dato-row"},q={class:"dato-row"},j={class:"dato-row"},G={class:"dato-row"},O={class:"dato-row"},D={class:"dato-row"},H={class:"acciones"};function R(o,t,r,e,i,n){return(0,a.uX)(),(0,a.CE)("div",Q,[(0,a.Lk)("button",{class:"cerrar",onClick:t[0]||(t[0]=t=>o.$emit("close"))},"×"),t[18]||(t[18]=(0,a.Lk)("h3",null,"Editar Producto",-1)),(0,a.Lk)("div",B,[(0,a.Lk)("div",T,[t[10]||(t[10]=(0,a.Lk)("p",null,"Nombre: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>i.nombre=o)},null,512),[[f.Jo,i.nombre]])]),(0,a.Lk)("div",K,[t[11]||(t[11]=(0,a.Lk)("p",null,"Precio de Compra: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>i.precioCompra=o)},null,512),[[f.Jo,i.precioCompra]])]),(0,a.Lk)("div",W,[t[12]||(t[12]=(0,a.Lk)("p",null,"Stock: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>i.stock=o)},null,512),[[f.Jo,i.stock]])]),(0,a.Lk)("div",q,[t[13]||(t[13]=(0,a.Lk)("p",null,"Nuevo Stock: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>i.nuevoStock=o)},null,512),[[f.Jo,i.nuevoStock]])]),(0,a.Lk)("div",j,[t[14]||(t[14]=(0,a.Lk)("p",null,"Precio de Venta: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=o=>i.precioVenta=o)},null,512),[[f.Jo,i.precioVenta]])]),(0,a.Lk)("div",G,[t[15]||(t[15]=(0,a.Lk)("p",null,"Marca: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>i.marca=o)},null,512),[[f.Jo,i.marca]])]),(0,a.Lk)("div",O,[t[16]||(t[16]=(0,a.Lk)("p",null,"Categoría: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>i.categoria=o)},null,512),[[f.Jo,i.categoria]])]),(0,a.Lk)("div",D,[t[17]||(t[17]=(0,a.Lk)("p",null,"Cantidad Mínima: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",placeholder:"Ingrese la cantidad mínima","onUpdate:modelValue":t[8]||(t[8]=o=>i.cantidadMinima=o),min:"1"},null,512),[[f.Jo,i.cantidadMinima]])])]),(0,a.Lk)("div",H,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...o)=>n.editarProducto&&n.editarProducto(...o))},"Guardar Cambios")])])}var Y={props:{productoEditar:{type:Object,required:!0}},data(){return{nombre:"",precioCompra:0,stock:0,nuevoStock:0,precioVenta:0,marca:"",categoria:"",cantidadMinima:1}},mounted(){const o=this.productoEditar;this.nombre=o.nombre,this.precioCompra=o.precioCompra,this.stock=o.stock,this.precioVenta=o.precioVenta,this.marca=o.marca,this.categoria=o.categoria,this.cantidadMinima=o.cantidadMinima||1},methods:{async editarProducto(){const o={nombre:this.nombre,precioCompra:this.precioCompra,stock:this.stock+this.nuevoStock,precioVenta:this.precioVenta,marca:this.marca,categoria:this.categoria,cantidadMinima:this.cantidadMinima};try{await(0,c.yl)(o,this.productoEditar.id),this.$emit("editar",o),this.$emit("close")}catch(t){console.error("Error al editar producto:",t)}}}};const Z=(0,P.A)(Y,[["render",R],["__scopeId","data-v-3ee8ae23"]]);var oo=Z,to={components:{ProductoFiltro:l.A,ProductoTable:w,AgregarProducto:N,EditarProducto:oo},data(){return{productos:[],filtro:{nombre:"",categoria:"",marca:""},mostrarAgregar:!1,mostrarEditar:!1,productoEditar:null}},async mounted(){await this.cargarProductos()},computed:{productosFiltrados(){return this.productos.filter(o=>{const t=""===this.filtro.nombre||o.nombre.toLowerCase().includes(this.filtro.nombre.toLowerCase()),r=""===this.filtro.categoria||o.categoria.toLowerCase().includes(this.filtro.categoria.toLowerCase()),a=""===this.filtro.marca||o.marca.toLowerCase().includes(this.filtro.marca.toLowerCase());return t&&r&&a})}},methods:{async cargarProductos(){try{const o=await(0,c.sb)();this.productos=o}catch(o){console.error("Error al cargar productos:",o)}},aplicarFiltro(o){this.filtro=o},async agregarProducto(o){try{await(0,c.h$)(o),await this.cargarProductos(),this.mostrarAgregar=!1}catch(t){console.error("Error al agregar producto:",t)}},editarProducto(o){this.productoEditar={...o},this.mostrarEditar=!0},async guardarProductoEditado(o){try{await(0,c.yl)(o,this.productoEditar.id),this.productoEditar=null,this.mostrarEditar=!1,await this.cargarProductos()}catch(t){console.error("Error al editar producto:",t)}},cerrarFormulario(){this.productoEditar=null,this.mostrarEditar=!1},async eliminarProducto(o){try{await(0,c.mh)(o.id),await this.cargarProductos()}catch(t){console.error("Error al eliminar producto:",t)}}}};const ro=(0,P.A)(to,[["render",n],["__scopeId","data-v-35c8973f"]]);var ao=ro},3460:function(o,t,r){r.d(t,{h$:function(){return i},mh:function(){return c},sb:function(){return l},vU:function(){return d},yl:function(){return n}});var a=r(4373);const e="http://localhost:8081/facturacion/v1.1/productos",i=async o=>{try{const t=await a.A.post(e,o);return t.data}catch(t){throw console.error("Error guardando producto:",t),t}},n=async(o,t)=>{try{const r=await a.A.put(`${e}/${t}`,o);return r.data}catch(r){throw console.error("Error actualizando producto:",r),r}},c=async o=>{try{const t=await a.A.delete(`${e}/${o}`);return t.data}catch(t){throw console.error("Error eliminando producto:",t),t}},l=async()=>{try{const o=await a.A.get(e);return o.data}catch(o){throw console.error("Error al obtener productos:",o),o}},d=async o=>{try{const t=await a.A.get(`${e}/buscar`,{params:{nombre:o}});return t.data}catch(t){throw console.error(`Error al obtener productos by nombre like ${o}:`,t),t}}},9474:function(o,t,r){r.d(t,{A:function(){return s}});var a=r(6768),e=r(5130);const i={class:"filtro-container"};function n(o,t,r,n,c,l){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>c.nombre=o),type:"text",placeholder:"Buscar por nombre...",onInput:t[1]||(t[1]=(...o)=>l.emitFiltro&&l.emitFiltro(...o))},null,544),[[e.Jo,c.nombre]]),r.ocultarCategoria?(0,a.Q3)("",!0):(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=o=>c.categoria=o),type:"text",placeholder:"Buscar por categoría...",onInput:t[3]||(t[3]=(...o)=>l.emitFiltro&&l.emitFiltro(...o))},null,544)),[[e.Jo,c.categoria]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>c.marca=o),type:"text",placeholder:"Buscar por marca...",onInput:t[5]||(t[5]=(...o)=>l.emitFiltro&&l.emitFiltro(...o))},null,544),[[e.Jo,c.marca]]),(0,a.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...o)=>l.limpiarFiltros&&l.limpiarFiltros(...o))},"Limpiar Filtros")])}var c={name:"ProductoFiltro",props:{ocultarCategoria:{type:Boolean,default:!1}},data(){return{nombre:"",categoria:"",marca:""}},methods:{emitFiltro(){this.$emit("filtrar",{nombre:this.nombre,categoria:this.categoria,marca:this.marca})},limpiarFiltros(){this.nombre="",this.categoria="",this.marca="",this.emitFiltro()}}},l=r(1241);const d=(0,l.A)(c,[["render",n],["__scopeId","data-v-1f290c57"]]);var s=d}}]);
//# sourceMappingURL=176.8284bc59.js.map